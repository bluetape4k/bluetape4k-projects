# AWS Common Architecture Patterns

> Source: https://aws.amazon.com/architecture/

## Web Application (Three-Tier)

```
┌─────────────────────────────────────────────────────────────┐
│                         Internet                             │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────┴────────────────────────────────┐
│                     CloudFront (CDN)                         │
│                         + WAF                                │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────┴────────────────────────────────┐
│                  Application Load Balancer                   │
│                    (Public Subnets)                         │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────┴────────────────────────────────┐
│              ECS Fargate / EC2 Auto Scaling                  │
│                   (Private Subnets)                         │
│                  + ElastiCache (Redis)                      │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────┴────────────────────────────────┐
│                  RDS Aurora (Multi-AZ)                       │
│                    (Private Subnets)                        │
└─────────────────────────────────────────────────────────────┘
```

## Serverless API

```
┌─────────────────────────────────────────────────────────────┐
│                        Client                                │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────┴────────────────────────────────┐
│                      API Gateway                             │
│                    (REST/HTTP API)                          │
└────────────────────────────┬────────────────────────────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
┌────────┴────────┐ ┌───────┴────────┐ ┌───────┴────────┐
│     Lambda      │ │    Lambda      │ │    Lambda      │
│   (Get User)    │ │  (Create User) │ │  (List Users)  │
└────────┬────────┘ └───────┬────────┘ └───────┬────────┘
         │                   │                   │
         └───────────────────┼───────────────────┘
                             │
┌────────────────────────────┴────────────────────────────────┐
│                       DynamoDB                               │
└─────────────────────────────────────────────────────────────┘
```

## Event-Driven Architecture

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   Producer   │───▶│   EventBridge│───▶│   Consumer   │
│  (Lambda)    │    │    (Events)  │    │  (Lambda)    │
└──────────────┘    └──────┬───────┘    └──────────────┘
                           │
         ┌─────────────────┼─────────────────┐
         │                 │                 │
         ▼                 ▼                 ▼
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│   SQS Queue  │  │  SNS Topic   │  │ Step Function│
└──────────────┘  └──────────────┘  └──────────────┘
```

## Microservices

```
┌─────────────────────────────────────────────────────────────┐
│                    API Gateway / ALB                         │
└────────────────────────────┬────────────────────────────────┘
                             │
    ┌────────────────────────┼────────────────────────┐
    │                        │                        │
┌───┴───┐               ┌────┴────┐              ┌────┴────┐
│Service│               │ Service │              │ Service │
│   A   │               │    B    │              │    C    │
│(ECS)  │               │ (Lambda)│              │  (EKS)  │
└───┬───┘               └────┬────┘              └────┬────┘
    │                        │                        │
    └────────────────────────┼────────────────────────┘
                             │
                    ┌────────┴────────┐
                    │    Service Mesh │
                    │   (App Mesh)    │
                    └─────────────────┘
```

## Data Lake

```
┌──────────────────────────────────────────────────────────────┐
│                      Data Sources                             │
│  (Databases, APIs, IoT, Logs, Streams)                       │
└────────────────────────────┬─────────────────────────────────┘
                             │
┌────────────────────────────┴─────────────────────────────────┐
│                    Ingestion Layer                            │
│  (Kinesis, DMS, AppFlow, Transfer Family)                    │
└────────────────────────────┬─────────────────────────────────┘
                             │
┌────────────────────────────┴─────────────────────────────────┐
│                     Storage Layer                             │
│              S3 (Raw → Processed → Curated)                  │
│                    + Lake Formation                           │
└────────────────────────────┬─────────────────────────────────┘
                             │
┌────────────────────────────┴─────────────────────────────────┐
│                   Processing Layer                            │
│        (Glue, EMR, Athena, Redshift Spectrum)                │
└────────────────────────────┬─────────────────────────────────┘
                             │
┌────────────────────────────┴─────────────────────────────────┐
│                   Consumption Layer                           │
│           (QuickSight, SageMaker, APIs)                      │
└──────────────────────────────────────────────────────────────┘
```

## CI/CD Pipeline

```
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   GitHub /   │───▶│  CodePipeline│───▶│  CodeBuild   │
│ CodeCommit   │    │   (Source)   │    │   (Build)    │
└──────────────┘    └──────────────┘    └──────┬───────┘
                                               │
                         ┌─────────────────────┴─────────────────────┐
                         │                                           │
                         ▼                                           ▼
                ┌──────────────┐                            ┌──────────────┐
                │     ECR      │                            │     S3       │
                │  (Container) │                            │  (Artifact)  │
                └──────┬───────┘                            └──────┬───────┘
                       │                                           │
                       └─────────────────┬─────────────────────────┘
                                         │
                                         ▼
                               ┌──────────────────┐
                               │   CodeDeploy     │
                               │  (Blue/Green)    │
                               └────────┬─────────┘
                                        │
               ┌────────────────────────┼────────────────────────┐
               │                        │                        │
               ▼                        ▼                        ▼
        ┌──────────┐            ┌──────────┐            ┌──────────┐
        │   Dev    │            │  Stage   │            │   Prod   │
        │   ECS    │            │   ECS    │            │   ECS    │
        └──────────┘            └──────────┘            └──────────┘
```

## Disaster Recovery

| Strategy          | RTO           | RPO       | Cost |
|-------------------|---------------|-----------|------|
| Backup & Restore  | Hours         | Hours     | $    |
| Pilot Light       | Minutes-Hours | Minutes   | $$   |
| Warm Standby      | Minutes       | Seconds   | $$$  |
| Multi-Site Active | Near Zero     | Near Zero | $$$$ |
